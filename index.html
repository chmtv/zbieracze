<!DOCTYPE html>
<html>
<head>
            <!-- Global site tag (gtag.js) - Google Analytics  -->
            <script async src="https://www.googletagmanager.com/gtag/js?id=UA-124831747-1"></script>
            <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'UA-124831747-1');
            </script>

    <meta charset="utf-8" />
    <meta name="description" content="Zbieracze to gra o żulu który grzebie w śmieciach w celu poszukiwania wartościowych przedmiotów i zostania najlepszym żulem w okolicy" />
    <meta name="author" content="Oddział Specjalnej Troski"/>
    <title>Zbieracze</title>

    <script>
        let zulX = 0;
        let zulY = 0;
        let SleepX;
        let SleepY;
        let PrevNode;
        let fields;
        let zulInv = [];
        let zulEnergy = 200;
        let zulEnergyRefill = 200;
        
        let zbieranieEnergy = 10;
        let jumpEnergy = 20;

        let zulEq = {
            /*
            zulEnergyRefill: 0,
            jumpEnergy: 0,
            zbieranieEnergy: 0,
            */
            head: {
                item: {
                    zulEnergyRefill: 0,
                    jumpEnergy: 0,
                    zbieranieEnergy: 0,
                    //name: 0,
                    //tooltipText: 0,

                },
            },
            torso: {
                item: {
                    zulEnergyRefill: 0,
                    jumpEnergy: 0,
                    zbieranieEnergy: 0,
                },
            },
            gloves: {
                item: {
                    zulEnergyRefill: 0,
                    jumpEnergy: 0,
                    zbieranieEnergy: 0,
                },
            },
            legs: {
                item: {
                    zulEnergyRefill: 0,
                    jumpEnergy: 0,
                    zbieranieEnergy: 0,
                },
            },
            boots: {
                item: {
                    zulEnergyRefill: 0,
                    jumpEnergy: 0,
                    zbieranieEnergy: 0,
                },
            },
        };

        function EquipItem(bodypart,itemid) { // Equips an item, if the itemID is 0, it dequips the item
            
            for(i = 0; i < zulInv.length; i++)
            {
                
                if(itemid == 0)
                {
                    AddItem(bodypart.item.id,1);
                    bodypart.item = {};
                    bodypart.item.zulEnergyRefill = 0;
                    bodypart.item.jumpEnergy = 0;
                    bodypart.item.zbieranieEnergy = 0;
                    zulInventoryToggle();
                    zulInventoryToggle();
                }
                if(itemid != 0 && zulInv[i].id == itemid)
                {
                    if(bodypart.item.id == undefined)
                    {
                        bodypart.item = itemlist[itemid - 1];
                        zulInv.splice(i,1);
                    }
                    else
                    {
                        AddItem(bodypart.item.id,1);
                        bodypart.item = itemlist[itemid - 1];
                        zulInv.splice(zulInv.findIndex((item) => {return item.id == itemid}),1);
                    }
                    zulInventoryToggle();
                    zulInventoryToggle();
                    
                }
            }
            Save();
        };
        

        let jumpEnergyPenalty = 0;
        let zbieranieEnergyPenalty = 0;

        function GetZulEnergyRefill()
        {
            return zulEnergyRefill + zulEq.head.item.zulEnergyRefill + zulEq.torso.item.zulEnergyRefill + zulEq.gloves.item.zulEnergyRefill + zulEq.legs.item.zulEnergyRefill + zulEq.boots.item.zulEnergyRefill;
        }
        function GetjumpEnergy()
        {
            let jenergy = jumpEnergy - zulEq.head.item.jumpEnergy - zulEq.torso.item.jumpEnergy - zulEq.gloves.item.jumpEnergy - zulEq.legs.item.jumpEnergy - zulEq.boots.item.jumpEnergy + jumpEnergyPenalty;

            if(jenergy >= 0)
            {
                return jenergy;
            }
            else
            {
                return 0;
            }
        }
        function GetzbieranieEnergy()
        {
            let zenergy = zbieranieEnergy - zulEq.head.item.zbieranieEnergy - zulEq.torso.item.zbieranieEnergy - zulEq.gloves.item.zbieranieEnergy - zulEq.legs.item.zbieranieEnergy - zulEq.boots.item.zbieranieEnergy + zbieranieEnergyPenalty;

            if(zenergy >= 0)
            {
                return zenergy;
            }
            else
            {
                return 0;
            }
        }


        let itemlist = [
            {
                //1
                id: 1,
                name: "Pusta Puszka",
                value: 5,
                img:"puszka.png",
                rarity: "gray",
                exp: 3,
            },
            {
                //2
                id: 2,
                name: "Puszka Szlacheckie Mocne (resztka)",
                value: 10,
                img: "szlacheckie.png",
                cb: 'zulEnergy += 10; document.getElementById("zulEnergy").innerHTML = zulEnergy;                                 for(i = 0; i < zulInv.length; i++){if(zulInv[i].id == itemlist[1].id){zulInv[i].amount -= 1;}}          AddItem(1,1); Save();',
                rarity: "gray",
                exp: 3,
            },
            {
                //3
                id: 3,
                name: "Puszka Karpackie Mocne (resztka)",
                value: 10,
                img: "karpackie.png",
                cb: 'zulEnergy += 10; document.getElementById("zulEnergy").innerHTML = zulEnergy;                                 for(i = 0; i < zulInv.length; i++){if(zulInv[i].id == itemlist[2].id){zulInv[i].amount -= 1;}}          AddItem(1,1); Save();',
                rarity: "gray",
                exp: 3,
            },
            {
                //4
                id: 4,
                name: "Butelka Szlacheckie Mocne (resztka)",
                value: 7,
                img: "szlacheckieButelka.jpg",
                cb: 'zulEnergy += 10; document.getElementById("zulEnergy").innerHTML = zulEnergy;                                 for(i = 0; i < zulInv.length; i++){if(zulInv[i].id == itemlist[3].id){zulInv[i].amount -= 1;}}           InvReset(1); Save();',
                rarity: "gray",
                exp: 3,
            },
            {
                //5
                id: 5,
                name: "Butelka Karpackie Mocne (resztka)",
                value: 7,
                img: "karpackieButelka.png",
                cb: 'zulEnergy += 10; document.getElementById("zulEnergy").innerHTML = zulEnergy;                                 for(i = 0; i < zulInv.length; i++){if(zulInv[i].id == itemlist[4].id){zulInv[i].amount -= 1;}}           InvReset(1); Save();',
                rarity: "gray",
                exp: 3,
            },
            {
                //6
                id: 6,
                name: "Miedziany Kabel",
                value: 40,
                img: "CUkabel.jpg",
                rarity: "white",
                exp: 10,
            },
            {
                //7
                id: 7,
                name: "Brudny sweterek",
                value: 20,
                img: "bsweter.png",
                cb: 'EquipItem(zulEq.torso,7);',
                rarity: "white",
                exp: 10,
                equipable: true,
                tooltipText: "Brudny sweter znaleziony w śmietniku",

                zulEnergyRefill: 10,
                jumpEnergy: 0.5,
                zbieranieEnergy: 0.5,
            },
            {
                //8
                id: 8,
                name: "Czysty sweterek",
                value: 20,
                img: "bsweter.png",
                cb: 'EquipItem(zulEq.torso,8);',
                rarity: "green",
                exp: 10,
                equipable: true,
                tooltipText: "Prosto ze śmietnika, ale czysty",

                zulEnergyRefill: 15,
                jumpEnergy: 0.75,
                zbieranieEnergy: 1.25,
            },
            {
                //9
                id: 9,
                name: "Brudna zimowa czapka",
                value: 20,
                img: "bzczapka.png",
                cb: "EquipItem(zulEq.head,9);",
                rarity: "white",
                exp: 10,
                equipable: true,
                tooltipText: "Zimowa czapka wygrzebana ze śmieci",

                zulEnergyRefill: 20,
                jumpEnergy: 0,
                zbieranieEnergy: 0
            },
            {
                //10
                id:10,
                name: "Czysta zimowa czapka",
                value: 20,
                img: "bzczapka.png",
                cb: "EquipItem(zulEq.head,10);",
                rarity: "green",
                exp: 10,
                equipable: true,
                tooltipText: "Świetna czapeczka prosto ze śmietnika",

                zulEnergyRefill: 35,
                jumpEnergy: 0,
                zbieranieEnergy: 0
            },
            {
                //11
                id:11,
                name: "Brudne zimowe rękawice",
                value: 20,
                img: "bZimRekawice.jpg",
                cb: "EquipItem(zulEq.gloves,11);",
                rarity: "white",
                exp: 10,
                equipable: true,
                tooltipText: "Nakraść sobie nimi można",

                zulEnergyRefill: 0,
                jumpEnergy: 0,
                zbieranieEnergy: 0.5
            },
            {
                //12
                id:12,
                name: "Czyste zimowe rękawice",
                value: 20,
                img: "bZimRekawice.jpg",
                cb: "EquipItem(zulEq.gloves,12);",
                rarity: "green",
                exp: 10,
                equipable: true,
                tooltipText: "Nakraść sobie można jeszcze lepiej niż brudnymi",

                zulEnergyRefill: 0,
                jumpEnergy: 0,
                zbieranieEnergy: 1.25
            },
            {
                //13
                id:13,
                name: "Brudne jeansy",
                value: 20,
                img: "bJeans.jpg",
                cb: "EquipItem(zulEq.legs,13);",
                rarity: "white",
                exp: 10,
                equipable: true,
                tooltipText: "Stare dobre jeansy świetne do grzebiania w śmieciach",

                zulEnergyRefill: 0,
                jumpEnergy: 0.75,
                zbieranieEnergy: 0
            },
            {
                //14
                id:14,
                name: "Czyste jeansy",
                value: 20,
                img: "bJeans.jpg",
                cb: "EquipItem(zulEq.legs,14);",
                rarity: "green",
                exp: 10,
                equipable: true,
                tooltipText: "Eleganckie jeansy w których można grzebać w śmieciach",

                zulEnergyRefill: 0,
                jumpEnergy: 1.5,
                zbieranieEnergy: 0
            },
            {
                //15
                id:15,
                name: "Brudne klapki",
                value: 20,
                img: "klapki.jpg",
                cb: "EquipItem(zulEq.boots,15);",
                rarity: "white",
                exp: 10,
                equipable: true,
                tooltipText: "Trudno sie szuka na Google Grafice zdjec klapek z przezroczystym tlem bo wyskakuja kuce i memy",

                zulEnergyRefill: 0,
                jumpEnergy: 0.75,
                zbieranieEnergy: 0
            },
            {
                //16
                id:16,
                name: "Czyste klapki",
                value: 20,
                img: "klapki.jpg",
                cb: "EquipItem(zulEq.boots,16);",
                rarity: "green",
                exp: 10,
                equipable: true,
                tooltipText: "Trudno sie szuka na Google Grafice zdjec klapek z przezroczystym tlem bo wyskakuja kuce i memy",

                zulEnergyRefill: 0,
                jumpEnergy: 1.5,
                zbieranieEnergy: 0
            },
            {
                //17
                id:17,
                name: "KLAPECZKI!",
                value: 200,
                img: "klapeczki.jpg",
                cb: "EquipItem(zulEq.boots,17);",
                rarity: "purple",
                exp: 50,
                equipable: true,
                tooltipText: "KLAPECZKI KURWA ZA ZLOTOWKE JE KURWA SPRZEDAM NA PODSTAWOWCE KURWA KLAPECZKI JAK CHUJ KURWA ZAJEBISTE BIERZ KLAPECZKI",

                zulEnergyRefill: 0,
                jumpEnergy: 2.75,
                zbieranieEnergy: 0
            },
            {
                //18
                id:18,
                name: "Czapka Sławka 17 Volta",
                value: 200,
                img: "czapkaslawka.jpg",
                cb: "EquipItem(zulEq.head,18);",
                rarity: "purple",
                exp: 50,
                equipable: true,
                tooltipText: "Tę czapkę nosił legendarny Sławek 17 Volta",

                zulEnergyRefill: 70,
                jumpEnergy: 0.25,
                zbieranieEnergy: 0.25
            },
            {
                //19
                id: 19,
                name: "Zegarek",
                value: 300,
                img: "zegarek.jpg",
                rarity: "purple",
                exp: 100,
            }
        ];

        let GeneralExp = 0;
        let GeneralL = 1;

        let zbieranieExp = 0;
        let zbieranieL = 1;
        let jumpExp = 0;
        let jumpL = 1;

        function ZbieranieLevel()
        {
            GeneralLevel();
            if(zbieranieExp >= 250 && zbieranieL < 2)
            {
                zbieranieEnergy -= 0.5;
                zbieranieL = 2;

                if(localStorage.zbieranie2flag == "true")
                { }
                else
                {
                    document.getElementById("Msg").childNodes[0].innerHTML = "Otrzymałeś poziom 2 zbierania<br>Energia potrzebna do zbierania zmniejszona o 0.5";
                    document.getElementById("Msg").style.display = "block";
                    localStorage.zbieranieL = 2;
                    localStorage.zbieranie2flag = true;
                }
            }
            if(zbieranieExp >= 600 && zbieranieL < 3)
            {
                zbieranieEnergy -= 0.5;
                zbieranieL = 3;

                if(localStorage.zbieranie3flag == "true")
                { }
                else
                {
                    document.getElementById("Msg").childNodes[0].innerHTML = "Otrzymałeś poziom 3 zbierania<br>Energia potrzebna do zbierania zmniejszona o 0.5";
                    document.getElementById("Msg").style.display = "block";
                    localStorage.zbieranieL = 3;
                    localStorage.zbieranie3flag = true;
                }
            }
            if(zbieranieExp >= 1000 && zbieranieL < 4)
            {
                zbieranieEnergy -= 0.5;
                zbieranieL = 4;

                if(localStorage.zbieranie4flag == "true")
                { }
                else
                {
                    document.getElementById("Msg").childNodes[0].innerHTML = "Otrzymałeś poziom 4 zbierania<br>Energia potrzebna do zbierania zmniejszona o 0.5";
                    document.getElementById("Msg").style.display = "block";
                    localStorage.zbieranieL = 4;
                    localStorage.zbieranie4flag = true;
                }
            }
            if(zbieranieExp >= 1500 && zbieranieL < 5)
            {
                zbieranieEnergy -= 1;
                zbieranieL = 5;

                if(localStorage.zbieranie5flag == "true")
                { }
                else
                {
                    document.getElementById("Msg").childNodes[0].innerHTML = "Otrzymałeś poziom 5 zbierania<br>Energia potrzebna do zbierania zmniejszona o 1<br>10% szansy na zużycie 50% mniej energii przy zebraniu";
                    document.getElementById("Msg").style.display = "block";
                    localStorage.zbieranieL = 5;
                    localStorage.zbieranie5flag = true;
                }
            }

        }
        function JumpLevel()
        {
            GeneralLevel();
            if(jumpExp >= 250 && jumpL < 2)
            {
                jumpEnergy -= 1;
                jumpL = 2;

                if(localStorage.jump2flag != "true")
                {
                    document.getElementById("Msg").childNodes[0].innerHTML = "Otrzymałeś poziom 2 podróżowania<br>Energia potrzebna do podróżowania zmniejszona o 1";
                    document.getElementById("Msg").style.display = "block";
                    localStorage.jumpL = 2;
                    localStorage.jump2flag = true;
                }
            }
            if(jumpExp >= 600 && jumpL < 3)
            {
                jumpEnergy -= 1;
                jumpL = 3;

                if(localStorage.jump3flag != "true")
                {
                    document.getElementById("Msg").childNodes[0].innerHTML = "Otrzymałeś poziom 3 podróżowania<br>Energia potrzebna do podróżowania zmniejszona o 1";
                    document.getElementById("Msg").style.display = "block";
                    localStorage.jumpL = 3;
                    localStorage.jump3flag = true;
                }
            }
            if(jumpExp >= 1000 && jumpL < 4)
            {
                jumpEnergy -= 1;
                jumpL = 4;

                if(localStorage.jump4flag != "true")
                {
                    document.getElementById("Msg").childNodes[0].innerHTML = "Otrzymałeś poziom 4 podróżowania<br>Energia potrzebna do podróżowania zmniejszona o 1";
                    document.getElementById("Msg").style.display = "block";
                    localStorage.jumpL = 4;
                    localStorage.jump4flag = true;
                }
            }
            if(jumpExp >= 1500 && jumpL < 5)
            {
                jumpEnergy -= 1;
                jumpL = 5;

                if(localStorage.jump5flag != "true")
                {
                    document.getElementById("Msg").childNodes[0].innerHTML = "Otrzymałeś poziom 5 podróżowania<br>Energia potrzebna do podróżowania zmniejszona o 1<br>10% szansy na zabranie o połowe mniej energii przy podróży";
                    document.getElementById("Msg").style.display = "block";
                    localStorage.jumpL = 5;
                    localStorage.jump5flag = true;
                }
            }
        }
        function GeneralLevel()
        {
            if(GeneralExp >= 500 && GeneralL < 2)
            {
                zulEnergyRefill += 25;
                
                GeneralL = 2;
                if(localStorage.general2flag != "true")
                {
                    document.getElementById("Msg").childNodes[0].innerHTML = "Otrzymałeś poziom 2 żula<br>Energia zwiększona o 25";
                    document.getElementById("Msg").style.display = "block";
                    localStorage.generalL = 2;
                    localStorage.general2flag = true;
                }
            }
            if(GeneralExp >= 1000 && GeneralL < 3)
            {
                zulEnergyRefill += 25;
                
                GeneralL = 3;
                if(localStorage.general3flag != "true")
                {
                    document.getElementById("Msg").childNodes[0].innerHTML = "Otrzymałeś poziom 3 żula<br>Energia zwiększona o 25";
                    document.getElementById("Msg").style.display = "block";
                    localStorage.generalL = 3;
                    localStorage.general3flag = true;
                }
            }
            if(GeneralExp >= 1500 && GeneralL < 4)
            {
                zulEnergyRefill += 25;
                
                GeneralL = 4;
                if(localStorage.general4flag != "true")
                {
                    document.getElementById("Msg").childNodes[0].innerHTML = "Otrzymałeś poziom 4 żula<br>Energia zwiększona o 25";
                    document.getElementById("Msg").style.display = "block";
                    localStorage.generalL = 4;
                    localStorage.general4flag = true;
                }
            }
            if(GeneralExp >= 2500 && GeneralL < 5)
            {
                zulEnergyRefill += 100;
                
                GeneralL = 5;
                if(localStorage.general5flag != "true")
                {
                    document.getElementById("Msg").childNodes[0].innerHTML = "Otrzymałeś poziom 5 żula<br>Energia zwiększona o 100";
                    document.getElementById("Msg").style.display = "block";
                    localStorage.generalL = 5;
                    localStorage.general5flag = true;
                }
            }
        }
        function GetMaxExpZbieranie()
        {
            switch(zbieranieL)
            {
                default:
                    return "MAX"
                case 1:
                    return 250;
                break;
                case 2:
                    return 600;
                break;
                case 3:
                    return 1000;
                break;
                case 4:
                    return 1500;
                break;
            }
        }
        function GetMaxExpJump()
        {
            switch(jumpL)
            {
                default:
                    return "MAX"
                case 1:
                    return 250;
                break;
                case 2:
                    return 600;
                break;
                case 3:
                    return 1000;
                break;
                case 4:
                    return 1500;
                break;
            }
        }
        function GetMaxExpGeneral()
        {
            switch(GeneralL)
            {
                default:
                    return "MAX"
                case 1:
                    return 500;
                break;
                case 2:
                    return 1000;
                break;
                case 3:
                    return 1500;
                break;
                case 4:
                    return 2500;
                break;
            }
        }

        function InvReset(rmode) // Finishes a couple of things after AddItem()
        {
                                if(event.target.className == "name")
                                {
                                    event.target.parentNode.style.display = "none";
                                    if(rmode != 1)
                                    {
                                            let zbieranieRandom = Math.random();
                                            if(zbieranieL >= 5)
                                            {
                                                if(zbieranieRandom > 0.90)
                                                {
                                                    zulEnergy -= GetzbieranieEnergy() / 2;
                                                    ZbieranieLevel();
                                                }
                                                else
                                                {
                                                    zulEnergy -= GetzbieranieEnergy();
                                                    ZbieranieLevel();
                                                }
                                            }
                                            else
                                            {
                                                zulEnergy -= GetzbieranieEnergy();
                                                    ZbieranieLevel();
                                            }
                                            
                                    }
                                    document.getElementById("zulEnergy").innerHTML = zulEnergy.toFixed(2);
                                }
                                if(event.target.tagName == "IMG")
                                {
                                    event.target.parentNode.style.display = "none";
                                    if(rmode != 1)
                                    {
                                        let zbieranieRandom = Math.random();
                                            if(zbieranieL >= 5)
                                            {
                                                if(zbieranieRandom > 0.90)
                                                {

                                                    zulEnergy -= GetzbieranieEnergy() / 2;
                                                    ZbieranieLevel();
                                                }
                                                else
                                                {
                                                    zulEnergy -= GetzbieranieEnergy();
                                                    ZbieranieLevel();
                                                }
                                            }
                                            else
                                            {
                                                zulEnergy -= GetzbieranieEnergy();
                                                    ZbieranieLevel();
                                            }
                                    }
                                    document.getElementById("zulEnergy").innerHTML = zulEnergy.toFixed(2);
                                }
                                if(event.target.className == "lootitem")
                                {
                                    event.target.style.display = "none";
                                    if(rmode != 1)
                                    {
                                        let zbieranieRandom = Math.random();
                                            if(zbieranieL >= 5)
                                            {
                                                if(zbieranieRandom > 0.90)
                                                {
                                                    zulEnergy -= GetzbieranieEnergy() / 2;
                                                    ZbieranieLevel();
                                                }
                                                else
                                                {
                                                    zulEnergy -= GetzbieranieEnergy();
                                                    ZbieranieLevel();
                                                }
                                            }
                                            else
                                            {
                                                zulEnergy -= GetzbieranieEnergy();
                                                    ZbieranieLevel();
                                            }
                                    }
                                    document.getElementById("zulEnergy").innerHTML = zulEnergy.toFixed(2);
                                }

                                if(document.getElementById("zulInv").style.display != "none")
                                {
                                    zulInventoryToggle();
                                    zulInventoryToggle();
                                    ZbieranieLevel();
                                }
                                Save();
                                zulInventoryToggle();
                                zulInventoryToggle();
        }
        function AddItem(item,resetmode) {
            if(zulEnergy >= GetzbieranieEnergy())
            {
                let clone = JSON.parse(JSON.stringify(itemlist[item - 1]));
                if(zulInv.filter((inv) => {return inv.id == clone.id})[0] != undefined && clone.equipable != true)
                {
                    
                    for(i = 0; i < zulInv.length; i++)
                    {
                        
                        if(zulInv[i].id == clone.id)
                        {
                            if(zulInv[i].amount == undefined)
                            {
                                if(resetmode != 1)
                                {
                                zbieranieExp += zulInv[i].exp;
                                GeneralExp += zulInv[i].exp;
                                }
                                    zulInv[i].amount = 1;
                                InvReset(resetmode);
                                break;
                            }
                            else
                            {
                                zulInv[i].amount += 1;
                                if(resetmode != 1)
                                {
                                zbieranieExp += zulInv[i].exp;
                                GeneralExp += zulInv[i].exp;
                                }
                                InvReset(resetmode);
                                break;
                            }
                        }
                    }
                }
                else
                {
                    let pushIndex = zulInv.push(clone) - 1;
                    if(zulInv[pushIndex].amount == undefined)
                    {
                        zulInv[pushIndex].amount = 1;
                        if(resetmode != 1)
                        {
                        zbieranieExp += zulInv[pushIndex].exp;
                        GeneralExp += zulInv[pushIndex].exp;
                        }
                        InvReset(resetmode);
                    }
                    else
                    {
                        zulInv[pushIndex].amount += 1;
                        {
                        zbieranieExp += zulInv[pushIndex].exp;
                        GeneralExp += zulInv[pushIndex].exp;
                        }
                        InvReset(resetmode);
                    }
                }
                
            }
        }


        function GenerateLoot(min,max,lootlist,coords)
        {
            let amount = Math.floor(Math.random() * (max - min + 1) + min);
            let itemid;
            let loothtml = '<div class="loot"> ';
            let weights = 0;
            let lootlist_ = [];
            
            for(i = 0; i < lootlist.length; i++)
            {
                weights += lootlist[i].amount;
            }
            for(k = 0; k < amount; k++)
            {
                let weightrand = Math.random() * weights + 1;
                let wrandsubtr;
                
                for(j = 0; j < lootlist.length; j++)
                {

                    weightrand -= lootlist[j].amount;
                    if(weightrand - lootlist[j].amount <= 0)
                    {
                        console.log(lootlist[j], itemlist[lootlist[j].item]);
                        lootlist_.push(lootlist[j].item);
                        loothtml += `<div class="lootitem"  style="border-right:${itemlist[lootlist[j].item - 1].rarity} 1px solid" onclick="AddItem(${lootlist[j].item})"><img  src="img/${itemlist[lootlist[j].item - 1].img}" /><span class="name">${itemlist[lootlist[j].item - 1].name}</span></div>`; 
                        break;
                    }

                }

            }

            
            loothtml += `<div class="close" onclick="closeloot('${coords}')">X</div></div>`;
            return loothtml;
        }
                        function BasicGen(coord)
                        {
                            return GenerateLoot(                                    3,5,[{item:1, amount:40,},
                                                                                        {item:2, amount:35,},
                                                                                        {item:3, amount:35,},
                                                                                        {item:4, amount:32,},
                                                                                        {item:5, amount:32,},
                                                                                        {item:6, amount:10,},
                                                                                        {item:7, amount:3,},
                                                                                        {item:8, amount:35,},
                                                                                        {item:9, amount:3},
                                                                                        {item:10, amount:2} ],
                                                                                        coord);
                        }
                        function SmietnikSpec1(coord) //5,1
                        {
                            return GenerateLoot(                                         10,10,[{item:1, amount:40,},
                                                                                        {item:2, amount:35,},
                                                                                        {item:3, amount:35,},
                                                                                        {item:4, amount:32,},
                                                                                        {item:5, amount:32,},
                                                                                        {item:6, amount:20,},
                                                                                        {item:7, amount:6,},
                                                                                        {item:8, amount:4,},
                                                                                        {item:9, amount:6} ],
                                                                                        coord);
                        }
        function MapHTML(fields) 
        {
            // document.getElementById("map").innerHTML = `<div class="laweczka" style=" left:5vw;                 top:15vh">Ławeczka</div>      <div class="${fields[0][0]}" style="left:20vw; top:30vh;" onclick="Jump(1,1)" id="1,1">${BasicGen("1,1")}</div><div class="${fields[1][0]}" style="left:40vw; top:30vh;" onclick="Jump(2,1)" id="2,1">${BasicGen("2,1")}</div><div class="${fields[2][0]}" style="left:60vw; top:30vh;" onclick="Jump(3,1)" id="3,1">${BasicGen("3,1")}</div><div class="${fields[3][0]}" style="left:20vw; top:50vh;" onclick="Jump(1,2)" id="1,2">${BasicGen("1,2")}</div><div class="${fields[4][0]}" style="left:40vw; top:50vh;" onclick="Jump(2,2)" id="2,2">${BasicGen("2,2")}</div><div class="${fields[5][0]}" style="left:60vw; top:50vh;" onclick="Jump(3,2)" id="3,2">${BasicGen("3,2")}</div><div class="${fields[6][0]}" style="left:20vw; top:70vh;" onclick="Jump(1,3)" id="1,3">${BasicGen("1,3")}</div><div class="${fields[7][0]}" style="left:40vw; top:70vh;" onclick="Jump(2,3)" id="2,3">${BasicGen("2,3")}</div> <div class="${fields[13][0]}" style="left:40vw; top:90vh;" onclick="Jump(2,4)" id="2,4">  </div> <div class="${fields[13][0]}" style="left:40vw; top:110vh;" onclick="Jump(2,5)" id="2,5">  </div> <div class="${fields[13][0]}" style="left:40vw; top:130vh;" onclick="Jump(2,6)" id="2,6">  </div> <div class="${fields[8][0]}" style="left:60vw; top:70vh;" onclick="Jump(3,3)" id="3,3">${BasicGen("3,3")}</div><div class="${fields[9][0]}" style="left:80vw; top:70vh;" onclick="Jump(4,3)" id="4,3"></div><div class="${fields[10][0]}" style="left:95vw; top:70vh;" onclick="Jump(5,3)" id="5,3"></div>    <div class="${fields[11][0]}" style="left:95vw; top:50vh;" onclick="Jump(5,2)" id="5,2"></div>  <div class="${fields[12][0]}" style="left:95vw; top:30vh;" onclick="Jump(5,1)" id="5,1">${fields[12][1]}</div>`;
            
            let map = '';

            for(l = 0; l < fields.length; l++)
            {
                map += `<div class="${fields[l].class}" style="left:${fields[l].posX * 20}vw; top:${fields[l].posY  * 20}vh" ${/* fields[l].class == "laweczka" ? "" : */ "onclick='" + "Jump(" + fields[l].posX  + "," + fields[l].posY + ")'"} id="${fields[l].posX + ',' + fields[l].posY}"> ${(fields[l].class == "laweczka") ? "Ławeczka" : (fields[l].class == "smietnik" || "") && GenerateLoot(fields[l].lootmin,fields[l].lootmax,fields[l].itemlist,fields[l].posX+","+fields[l].posY)} </div>`;
            }
            
            
            document.getElementById("map").innerHTML = map;
        }
        function MapGenerate(name)
        {
            switch(name)
            {
                case "first":
                document.getElementById("map").style.opacity = 0;

                
                if(SleepX == undefined && SleepY == undefined)
                {
                    SleepX = 1;
                    SleepY = 1;
                }
                zulX = SleepX;
                zulY = SleepY;

                

                setTimeout(() => {
                    zulEnergy = GetZulEnergyRefill();
                    document.getElementById('zulEnergy').innerHTML = zulEnergy;
                


                    // Wpierdolić tutaj generacje mapy kurwa mac

                    let BasicSmietnik1 = {class: "smietnik", lootmin: 3, lootmax: 5, itemlist: [
                    {item:1, amount:40,},
                    {item:2, amount:20,},
                    {item:3, amount:20,},
                    {item:4, amount:20,},
                    {item:5, amount:20,},
                    {item:6, amount:15,},
                    {item:7, amount:2,},
                    {item:8, amount:1,},
                    {item:9, amount:2},
                    {item:10, amount:1},
                    {item:11, amount:2},
                    {item:12, amount:1},
                    {item:13, amount:2},
                    {item:14, amount:1},
                    {item:15, amount:2},
                    {item:16, amount:1},
                    ]};
                    let BasicSmietnik2 = {class: "smietnik", lootmin: 3, lootmax: 5, itemlist: [
                    {item:1, amount:40,},
                    {item:2, amount:20,},
                    {item:3, amount:20,},
                    {item:4, amount:20,},
                    {item:5, amount:20,},
                    {item:6, amount:15,},
                    {item:7, amount:2,},
                    {item:8, amount:1,},
                    {item:9, amount:2},
                    {item:10, amount:1},
                    {item:11, amount:2},
                    {item:12, amount:1},
                    {item:13, amount:2},
                    {item:14, amount:1},
                    {item:15, amount:2},
                    {item:16, amount:1},
                    {item: 17, amount: 3}
                    ]};

                    let SpecSmietnik1 = {class: "smietnik", lootmin: 10, lootmax: 10, itemlist: [
                    {item:1, amount:40,},
                    {item:2, amount:20,},
                    {item:3, amount:20,},
                    {item:4, amount:20,},
                    {item:5, amount:20,},
                    {item:6, amount:15,},
                    {item:7, amount:3,},
                    {item:8, amount:2,},
                    {item:9, amount:3},
                    {item:10, amount:2},
                    {item:11, amount:3},
                    {item:12, amount:2},
                    {item:13, amount:3},
                    {item:14, amount:2},
                    {item:15, amount:3},
                    {item:16, amount:2},
                    {item: 17, amount: 4}
                    ]};
                    let SpecSmietnik2 = {class: "smietnik", lootmin: 5, lootmax: 5, itemlist: [
                    {item:2, amount:30,},
                    {item:3, amount:30,},
                    {item:4, amount:30,},
                    {item:5, amount:30,},
                    {item:6, amount:23,},
                    {item:7, amount:5,},
                    {item:8, amount:4,},
                    {item:9, amount:5},
                    {item:10, amount:4},
                    {item:11, amount:5},
                    {item:12, amount:4},
                    {item:13, amount:5},
                    {item:14, amount:4},
                    {item:15, amount:5},
                    {item:16, amount:4},
                    {item:17, amount:2},
                    {item:18, amount:2},
                    {item: 17, amount: 5}
                    ]};
                    
                    MapHTML(
                        [
                            // pierwsza czesc mapy
                        {class: "laweczka", posX:1, posY:1, coord: "1,1"},
                        Math.random() > 0.7 ? {class: "smietnik", posX:2, posY:2, lootmin: 3, lootmax: 5, itemlist: BasicSmietnik1.itemlist} : {class: "puste", posX:2, posY:2},

                        Math.random() > 0.7 ? {class: "smietnik", posX:3, posY:2, lootmin: 3, lootmax: 5, itemlist: BasicSmietnik1.itemlist} : {class: "puste", posX:3, posY:2},

                        Math.random() > 0.7 ? {class: "smietnik", posX:4, posY:2, lootmin: 3, lootmax: 5, itemlist: BasicSmietnik1.itemlist} : {class: "puste", posX:4, posY:2},

                        Math.random() > 0.7 ? {class: "smietnik", posX:2, posY:3, lootmin: 3, lootmax: 5, itemlist: BasicSmietnik1.itemlist} : {class: "puste", posX:2, posY:3},

                        Math.random() > 0.7 ? {class: "smietnik", posX:3, posY:3, lootmin: 3, lootmax: 5, itemlist: BasicSmietnik1.itemlist} : {class: "puste", posX:3, posY:3},
                        
                        Math.random() > 0.7 ? {class: "smietnik", posX:4, posY:3, lootmin: 3, lootmax: 5, itemlist: BasicSmietnik1.itemlist} : {class: "puste", posX:4, posY:3},

                        Math.random() > 0.7 ? {class: "smietnik", posX:2, posY:4, lootmin: 3, lootmax: 5, itemlist: BasicSmietnik1.itemlist} : {class: "puste", posX:2, posY:4},

                        Math.random() > 0.7 ? {class: "smietnik", posX:3, posY:4, lootmin: 3, lootmax: 5, itemlist: BasicSmietnik1.itemlist} : {class: "puste", posX:3, posY:4},

                        Math.random() > 0.7 ? {class: "smietnik", posX:4, posY:4, lootmin: 3, lootmax: 5, itemlist: BasicSmietnik1.itemlist} : {class: "puste", posX:4, posY:4},

                        // przejscie na druga czesc mapy
                        {class: "puste", posX:3, posY:5},
                        {class: "puste", posX:3, posY:6},
                        {class: "puste", posX:3, posY:7},
                        {class: "puste", posX:3, posY:8},
                        {class: "puste", posX:3, posY:9},
                        {class: "puste", posX:4, posY:9},
                        {class: "puste", posX:5, posY:9},
                        {class: "puste", posX:6, posY:9},
                        {class: "puste", posX:7, posY:9},
                        {class: "puste", posX:8, posY:9},
                        {class: "puste", posX:8, posY:10},
                        {class: "puste", posX:8, posY:11},
                        {class: "puste", posX:8, posY:12},
                        {class: "puste", posX:8, posY:13},

                        //druga czesc mapy
                        Math.random() > 0.6 ? {class: "smietnik", posX:6, posY:14, lootmin: 3, lootmax: 5, itemlist: BasicSmietnik2.itemlist} : {class: "puste", posX:6, posY:14},
                        Math.random() > 0.6 ? {class: "smietnik", posX:7, posY:14, lootmin: 3, lootmax: 5, itemlist: BasicSmietnik2.itemlist} : {class: "puste", posX:7, posY:14},
                        Math.random() > 0.6 ? {class: "smietnik", posX:8, posY:14, lootmin: 3, lootmax: 5, itemlist: BasicSmietnik2.itemlist} : {class: "puste", posX:8, posY:14},
                        Math.random() > 0.6 ? {class: "smietnik", posX:9, posY:14, lootmin: 3, lootmax: 5, itemlist: BasicSmietnik2.itemlist} : {class: "puste", posX:9, posY:14},
                        Math.random() > 0.6 ? {class: "smietnik", posX:10, posY:14, lootmin: 3, lootmax: 5, itemlist: BasicSmietnik2.itemlist} : {class: "puste", posX:10, posY:14},
                        {class: "laweczka", posX: 11, posY: 14},
                        Math.random() > 0.6 ? {class: "smietnik", posX:6, posY:15, lootmin: 3, lootmax: 5, itemlist: BasicSmietnik2.itemlist} : {class: "puste", posX:6, posY:15},
                        Math.random() > 0.6 ? {class: "smietnik", posX:7, posY:15, lootmin: 3, lootmax: 5, itemlist: BasicSmietnik2.itemlist} : {class: "puste", posX:7, posY:15},
                        Math.random() > 0.6 ? {class: "smietnik", posX:8, posY:15, lootmin: 3, lootmax: 5, itemlist: BasicSmietnik2.itemlist} : {class: "puste", posX:8, posY:15},
                        Math.random() > 0.6 ? {class: "smietnik", posX:9, posY:15, lootmin: 3, lootmax: 5, itemlist: BasicSmietnik2.itemlist} : {class: "puste", posX:9, posY:15},
                        Math.random() > 0.6 ? {class: "smietnik", posX:10, posY:15, lootmin: 3, lootmax: 5, itemlist: BasicSmietnik2.itemlist} : {class: "puste", posX:10, posY:15},
                        Math.random() > 0.6 ? {class: "smietnik", posX:6, posY:16, lootmin: 3, lootmax: 5, itemlist: BasicSmietnik2.itemlist} : {class: "puste", posX:6, posY:16},
                        Math.random() > 0.6 ? {class: "smietnik", posX:7, posY:16, lootmin: 3, lootmax: 5, itemlist: BasicSmietnik2.itemlist} : {class: "puste", posX:7, posY:16},
                        Math.random() > 0.6 ? {class: "smietnik", posX:8, posY:16, lootmin: 3, lootmax: 5, itemlist: BasicSmietnik2.itemlist} : {class: "puste", posX:8, posY:16},
                        Math.random() > 0.6 ? {class: "smietnik", posX:9, posY:16, lootmin: 3, lootmax: 5, itemlist: BasicSmietnik2.itemlist} : {class: "puste", posX:9, posY:16},
                        Math.random() > 0.6 ? {class: "smietnik", posX:10, posY:16, lootmin: 3, lootmax: 5, itemlist: BasicSmietnik2.itemlist} : {class: "puste", posX:10, posY:16},
                        
                        {class: "puste", posX:5, posY:15},
                        {class: "puste", posX:4, posY:15},
                        {class: "puste", posX:3, posY:15},
                        {class: "smietnik", posX:2, posY:15, lootmin: 5, lootmax: 5, itemlist: SpecSmietnik2.itemlist},

                        {class: "puste", posX:6, posY:17},
                        {class: "puste", posX:5, posY:17},
                        {class: "puste", posX:4, posY:17},
                        {class: "puste", posX:3, posY:17},
                        {class: "smietnik", posX:2, posY:17, lootmin: 5, lootmax: 5, itemlist: SpecSmietnik2.itemlist},

                        {class: "puste", posX:11, posY:16},
                        {class: "puste", posX:12, posY:16},
                        {class: "puste", posX:13, posY:16},
                        {class: "smietnik", posX:14, posY:16, lootmin: 5, lootmax: 5, itemlist: SpecSmietnik2.itemlist},

                        {class: "puste", posX:10, posY:17},
                        {class: "puste", posX:10, posY:18},
                        {class: "puste", posX:11, posY:18},
                        {class: "puste", posX:12, posY:18},
                        {class: "smietnik", posX:13, posY:18, lootmin: 10, lootmax: 10, itemlist: SpecSmietnik1.itemlist},

                        //spejcalny smietnik na pierwszej czesci mapy
                        {class: "puste", posX:5, posY:4},
                        {class: "puste", posX:6, posY:4},
                        {class: "puste", posX:6, posY:3},
                        {class: "smietnik", posX:6, posY:2, lootmin: 10, lootmax: 10, itemlist: SpecSmietnik1.itemlist},


                        //{class: "zlom", posX:4, posY:5},
                        ]);

                    document.getElementById("map").scrollTop = document.getElementById(`${zulX},${zulY}`).offsetTop - window.innerHeight * 0.5;
                    document.getElementById("map").scrollLeft = document.getElementById(`${zulX},${zulY}`).offsetLeft - window.innerWidth * 0.5;

                    document.getElementById("map").style.opacity = 1;
                },1000);

                break;
            }
        }
        

        function Jump(x,y,exp)
        {
            if(x - zulX >= -1 && x - zulX <= 1)
            {
                if(y - zulY >= -1 && y - zulY <= 1)
                {
                    if(event.target.className == "laweczka")
                        {
                            SleepX = x;
                            SleepY = y;
                        }
                    else if(zulEnergy >= GetjumpEnergy())
                    {
                        //3vw      20vw/vh

                        if(document.getElementById(`${zulX},${zulY}`) && document.getElementById(`${zulX},${zulY}`).className != "laweczka")
                        {
                            

                            document.getElementById(`${zulX},${zulY}`).style.backgroundColor=prevNode;
                            document.getElementById(`${zulX},${zulY}`).style.outline = "solid 1px yellow";
                            document.getElementById(`${zulX},${zulY}`).style.width = "3vw";
                            document.getElementById(`${zulX},${zulY}`).style.height = "3vw";
                            if(document.getElementById(`${zulX},${zulY}`).className == "smietnik" && document.getElementById(`${zulX},${zulY}`).childNodes.length != 0)
                                {
                                    if(event.target.className == "close")
                                    {
                                        document.getElementById(`${zulX},${zulY}`).getElementsByClassName("loot")[0].style.display = "none";
                                    }
                                    if(event.target.className == "smietnik" || event.target.className == "puste" || event.target.className == "zlom")
                                    {
                                        document.getElementById(`${zulX},${zulY}`).getElementsByClassName("loot")[0].style.display = "none";
                                    }
                                }
                        }
                        
                        if(event.target.className != "close" && event.target.className != "loot" && event.target.className != "lootitem" && event.target.className != "name" && event.target.tagName != "IMG")
                        {
                            
                            if(event.target != document.getElementById(`${zulX},${zulY}`))
                            {
                                if(jumpL >= 5 && Math.random() > 0.90)
                                {
                                    zulEnergy -= GetjumpEnergy() / 2;
                                }
                                else
                                {
                                    zulEnergy -= GetjumpEnergy();
                                }
                                if(!exp)
                                {
                                    jumpExp += 10;
                                    GeneralExp += 10;
                                }
                            }
                                document.getElementById("zulEnergy").innerHTML = zulEnergy;
                                JumpLevel();
                        }
                        zulX = x;
                        zulY = y;

                            document.getElementById("map").scrollTop = document.getElementById(`${zulX},${zulY}`).offsetTop - window.innerHeight * 0.5;
                            document.getElementById("map").scrollLeft = document.getElementById(`${zulX},${zulY}`).offsetLeft - window.innerWidth * 0.5;
                        
                        
                        prevNode = document.getElementById(`${zulX},${zulY}`).style.backgroundColor;
                        document.getElementById(`${x},${y}`).style.backgroundColor="green";
                        document.getElementById(`${zulX},${zulY}`).style.width = "5vw";
                        document.getElementById(`${zulX},${zulY}`).style.height = "5vw";
                        if(document.getElementById(`${zulX},${zulY}`).className == "smietnik" && document.getElementById(`${zulX},${zulY}`).childNodes.length != 0)
                        {
                            if(event.target.className == "smietnik" && event.target.className != "lootitem")
                            {
                                document.getElementById(`${zulX},${zulY}`).getElementsByClassName("loot")[0].style.display = "block";
                            }
                        }
                        
                    }
                }
            }
            Save();
        }
        function closeloot(id)
        {
            document.getElementById(id).getElementsByClassName("loot")[0].style.display = "none";
        }
        function zulInventoryToggle() { // Opens/Closes the Inventory and Generates it
            zulInv = zulInv.filter((item) => { return item.amount > 0;});
            if(document.getElementById('zulInv').style.display == "none")
            {
                // Equipped Items Generation
                document.getElementById('zulInv').innerHTML += "<div id='zulEquipped'>"
                
                document.getElementById('zulEquipped').innerHTML += (zulEq.head.item.id || '') ? `<div class="zulEqItem" onclick="EquipItem(zulEq.head,0);">  <img class="zulEqImg" src="img/${zulEq.head.item.img}"/>  <div class="zulEqName">${zulEq.head.item.name}</div>          <div class="zulEqTooltip">${zulEq.head.item.tooltipText} </br> Energia po spaniu: ${zulEq.head.item.zulEnergyRefill} </br> Energia do zbierania: ${zulEq.head.item.zbieranieEnergy} </br> Energia do podróży: ${zulEq.head.item.jumpEnergy}</div> </div>`   :    '<div class="zulEqItem"> Głowa: <div class="zulEqNameNoItem" style="    "> Brak Przedmiotu </div>';

                document.getElementById('zulEquipped').innerHTML += (zulEq.torso.item.id || '') ? `<div class="zulEqItem" onclick="EquipItem(zulEq.torso,0);">  <img class="zulEqImg" src="img/${zulEq.torso.item.img}"/>  <div class="zulEqName">${zulEq.torso.item.name}</div>          <div class="zulEqTooltip">${zulEq.torso.item.tooltipText} </br> Energia po spaniu: ${zulEq.torso.item.zulEnergyRefill} </br> Energia do zbierania: ${zulEq.torso.item.zbieranieEnergy} </br> Energia do podróży: ${zulEq.torso.item.jumpEnergy}</div> </div>`   :    '<div class="zulEqItem"> Ciało: <div class="zulEqNameNoItem" style="position: absolute; left:4vw; top:-1vh;"> Brak Przedmiotu </div>';

                document.getElementById('zulEquipped').innerHTML += (zulEq.gloves.item.id || '') ? `<div class="zulEqItem" onclick="EquipItem(zulEq.gloves,0);">  <img class="zulEqImg" src="img/${zulEq.gloves.item.img}"/>  <div class="zulEqName">${zulEq.gloves.item.name}</div>          <div class="zulEqTooltip">${zulEq.gloves.item.tooltipText} </br> Energia po spaniu: ${zulEq.gloves.item.zulEnergyRefill} </br> Energia do zbierania: ${zulEq.gloves.item.zbieranieEnergy} </br> Energia do podróży: ${zulEq.gloves.item.jumpEnergy}</div> </div>`   :    '<div class="zulEqItem"> Dłonie: <div class="zulEqNameNoItem" style="position: absolute; left:4vw; top:-1vh;"> Brak Przedmiotu </div>';

                document.getElementById('zulEquipped').innerHTML += (zulEq.legs.item.id || '') ? `<div class="zulEqItem" onclick="EquipItem(zulEq.legs,0);">  <img class="zulEqImg" src="img/${zulEq.legs.item.img}"/>  <div class="zulEqName">${zulEq.legs.item.name}</div>          <div class="zulEqTooltip">${zulEq.legs.item.tooltipText} </br> Energia po spaniu: ${zulEq.legs.item.zulEnergyRefill} </br> Energia do zbierania: ${zulEq.legs.item.zbieranieEnergy} </br> Energia do podróży: ${zulEq.legs.item.jumpEnergy}</div> </div>`   :    '<div class="zulEqItem"> Nogi: <div class="zulEqNameNoItem" style="position: absolute; left:4vw; top:-1vh;"> Brak Przedmiotu </div>';

                document.getElementById('zulEquipped').innerHTML += (zulEq.boots.item.id || '') ? `<div class="zulEqItem" onclick="EquipItem(zulEq.boots,0);">  <img class="zulEqImg" src="img/${zulEq.boots.item.img}"/>  <div class="zulEqName">${zulEq.boots.item.name}</div>          <div class="zulEqTooltip">${zulEq.boots.item.tooltipText} </br> Energia po spaniu: ${zulEq.boots.item.zulEnergyRefill} </br> Energia do zbierania: ${zulEq.boots.item.zbieranieEnergy} </br> Energia do podróży: ${zulEq.boots.item.jumpEnergy}</div> </div>`   :    '<div class="zulEqItem"> Buty: <div class="zulEqNameNoItem" style="position: absolute; left:4vw; top:-1vh;"> Brak Przedmiotu </div>';

                // General Items Generation
                document.getElementById('zulInv').innerHTML += "<div id='zulItems'>";
                for(i = 0; i < zulInv.length; i++)
                {
                            let usable;
                            if(zulInv[i].amount <= 0)
                            {  

                            }
                            else
                            {
                                if(zulInv[i].cb)
                                {                        
                                    usable = "Usable";
                                    document.getElementById('zulItems').innerHTML += `<div class="invItem${usable}" style='border-right:${zulInv[i].rarity} 5px solid'   onclick='${zulInv[i].cb}'><img  src="img/${zulInv[i].img}"/>     <div class="name" >${zulInv[i].name}</div><div class="value"  >Wartość: ${zulInv[i].value}</div>  <div class="amount"  >x${zulInv[i].amount}</div>  </div>`;
                                }
                                else
                                {
                                    usable = "Unusable";
                                    document.getElementById('zulItems').innerHTML += `<div class="invItem${usable}" style='border-right:${zulInv[i].rarity} 5px solid' ><img  src="img/${zulInv[i].img}"/>     <div class="name">${zulInv[i].name}</div><div class="value">Wartość: ${zulInv[i].value}</div>  <div class="amount">x${zulInv[i].amount}</div>  </div>`;
                                }
                            }
                            if(zulInv.length - i == 1)
                            {
                                document.getElementById('zulInv').innerHTML += "</div>";
                            }
                }
                document.getElementById('zulInv').style.display = "block";
                document.getElementById("StatsToggle").style.zIndex = 1;
                document.getElementById('zulInvToggle').style.left = "37vw";
            }
            else
            {
                document.getElementById('zulInv').style.display = "none";
                document.getElementById("StatsToggle").style.zIndex = 3;
                document.getElementById('zulInvToggle').style.left = "1vw";
                document.getElementById('zulInv').innerHTML = "";
            }
        }

        function StatsToggle()
        {

            if(document.getElementById('stats').style.display == "none")
            {
                document.getElementById('stats').innerHTML = `Poziom żula: ${GeneralL} &nbsp; &nbsp; &nbsp; ${GeneralExp}/${GetMaxExpGeneral()}<br><br>Poziom zbierania: ${zbieranieL}  &nbsp; &nbsp; &nbsp; ${zbieranieExp}/${GetMaxExpZbieranie()}<br><br>Poziom podróży: ${jumpL}&nbsp; &nbsp; &nbsp; ${jumpExp}/${GetMaxExpJump()}`;

                document.getElementById('zulInvToggle').style.zIndex = 1;
                document.getElementById('stats').style.display = "block";
                document.getElementById('StatsToggle').style.left = "37vw";
            }
            else
            {
                document.getElementById('stats').style.display = "none";
                document.getElementById('zulInvToggle').style.zIndex = 3;
                document.getElementById('StatsToggle').style.left = "14vw";
            }
        }
        function Intro()
        {
            if(document.getElementById('gownoWarning').style.display == "block")
            {
            document.getElementById('intro').style.display = "block";
            document.getElementById('intro').play();
            document.getElementById('intro').addEventListener('ended', () => {document.getElementById('gownoWarning').style.display = "none";});
            }
            else
            {
            document.getElementById('gownoWarning').getElementsByClassName('MsgYes')[0].style = "display:block;";
            document.getElementById('gownoWarning').getElementsByClassName('MsgNo')[0].style = "display:block;";
            document.getElementById('intro').style.display = "none";
            document.getElementById('intro').pause();
            }
        }
        function IntroToggle()
        {
            let warning = document.getElementById('gownoWarning');
            if(warning.style.display == "none")
            {
                warning.style.display='block';                                   
                warning.getElementsByClassName('MsgYes')[0].style = 'display:block;';
                warning.getElementsByClassName('MsgNo')[0].style = 'display:block;';
                document.getElementById('intro').style.display = 'none';
                document.getElementById('intro').pause();
            }
            else
            {
                warning.style.display='none';                                   
                // warning.getElementsByClassName('MsgYes')[0].style = 'display:block;';
                // warning.getElementsByClassName('MsgNo')[0].style = 'display:block;';
                document.getElementById('intro').style.display = 'none';
                document.getElementById('intro').pause();
            }
        }
        function Save()
        {
            localStorage.zulInv = JSON.stringify(zulInv);
            localStorage.zulEq = JSON.stringify(zulEq);

            localStorage.zbieranieExp = zbieranieExp;
            localStorage.zbieranieL = zbieranieL;
            localStorage.jumpExp = jumpExp;
            localStorage.jumpL = jumpL;
            localStorage.GeneralExp = GeneralExp;
            localStorage.GeneralL = GeneralL;
            localStorage.SleepX = SleepX;
            localStorage.SleepY = SleepY;
        }
        function Load() 
        {
            if(localStorage.zulInv != "" && localStorage.zulInv != "[]")
            {
                 zulInv = JSON.parse(localStorage.zulInv);
                 for(i = 0; i < zulInv.length; i++)
                 {
                     // chujowo jest ten okutasialy inventory zrobiony, niech sie pierdoli, kiedys tego zjeba zmienie ale kurwa aktualizacja ma byc dzisiaj chuju zajebany pierdolnij sie w leb
                     
                     zulInv[i].name = itemlist[zulInv[i].id - 1].name;
                     zulInv[i].value = itemlist[zulInv[i].id - 1].value;
                     zulInv[i].img = itemlist[zulInv[i].id - 1].img;
                     zulInv[i].rarity = itemlist[zulInv[i].id - 1].rarity;
                     zulInv[i].exp = itemlist[zulInv[i].id - 1].exp;
                     zulInv[i].cb = itemlist[zulInv[i].id - 1].cb;
                     zulInv[i].tootlipText = itemlist[zulInv[i].id - 1].tootlipText;
                     zulInv[i].zulEnergyRefill = itemlist[zulInv[i].id - 1].zulEnergyRefill;
                     zulInv[i].jumpEnergy = itemlist[zulInv[i].id - 1].jumpEnergy;
                     zulInv[i].zbieranieEnergy = itemlist[zulInv[i].id - 1].zbieranieEnergy;
                     zulInv[i].equipable = itemlist[zulInv[i].id - 1].equipable;
                 }
            }
            if(localStorage.zulEq != "" && localStorage.zulInv != "[]")
            {
                console.log(Object.keys(zulEq));
                zulEq = JSON.parse(localStorage.zulEq);
                    
                     if(zulEq.head.item.id)
                     {
                     zulEq.head.item.name = itemlist[zulEq.head.item.id - 1].name;
                     zulEq.head.item.value = itemlist[zulEq.head.item.id - 1].value;
                     zulEq.head.item.img = itemlist[zulEq.head.item.id - 1].img;
                     zulEq.head.item.rarity = itemlist[zulEq.head.item.id - 1].rarity;
                     zulEq.head.item.exp = itemlist[zulEq.head.item.id - 1].exp;
                     zulEq.head.item.cb = itemlist[zulEq.head.item.id - 1].cb;
                     zulEq.head.item.tootlipText = itemlist[zulEq.head.item.id - 1].tootlipText;
                     zulEq.head.item.zulEnergyRefill = itemlist[zulEq.head.item.id - 1].zulEnergyRefill;
                     zulEq.head.item.jumpEnergy = itemlist[zulEq.head.item.id - 1].jumpEnergy;
                     zulEq.head.item.zbieranieEnergy = itemlist[zulEq.head.item.id - 1].zbieranieEnergy;
                     zulEq.head.item.equipable = itemlist[zulEq.head.item.id - 1].equipable;
                     }
                     if(zulEq.torso.item.id)
                     {
                     zulEq.torso.item.name = itemlist[zulEq.torso.item.id - 1].name;
                     zulEq.torso.item.value = itemlist[zulEq.torso.item.id - 1].value;
                     zulEq.torso.item.img = itemlist[zulEq.torso.item.id - 1].img;
                     zulEq.torso.item.rarity = itemlist[zulEq.torso.item.id - 1].rarity;
                     zulEq.torso.item.exp = itemlist[zulEq.torso.item.id - 1].exp;
                     zulEq.torso.item.cb = itemlist[zulEq.torso.item.id - 1].cb;
                     zulEq.torso.item.tootlipText = itemlist[zulEq.torso.item.id - 1].tootlipText;
                     zulEq.torso.item.zulEnergyRefill = itemlist[zulEq.torso.item.id - 1].zulEnergyRefill;
                     zulEq.torso.item.jumpEnergy = itemlist[zulEq.torso.item.id - 1].jumpEnergy;
                     zulEq.torso.item.zbieranieEnergy = itemlist[zulEq.torso.item.id - 1].zbieranieEnergy;
                     zulEq.torso.item.equipable = itemlist[zulEq.torso.item.id - 1].equipable;
                     }
                     if(zulEq.gloves.item.id)
                     {
                     zulEq.gloves.item.name = itemlist[zulEq.gloves.item.id - 1].name;
                     zulEq.gloves.item.value = itemlist[zulEq.gloves.item.id - 1].value;
                     zulEq.gloves.item.img = itemlist[zulEq.gloves.item.id - 1].img;
                     zulEq.gloves.item.rarity = itemlist[zulEq.gloves.item.id - 1].rarity;
                     zulEq.gloves.item.exp = itemlist[zulEq.gloves.item.id - 1].exp;
                     zulEq.gloves.item.cb = itemlist[zulEq.gloves.item.id - 1].cb;
                     zulEq.gloves.item.tootlipText = itemlist[zulEq.gloves.item.id - 1].tootlipText;
                     zulEq.gloves.item.zulEnergyRefill = itemlist[zulEq.gloves.item.id - 1].zulEnergyRefill;
                     zulEq.gloves.item.jumpEnergy = itemlist[zulEq.gloves.item.id - 1].jumpEnergy;
                     zulEq.gloves.item.zbieranieEnergy = itemlist[zulEq.gloves.item.id - 1].zbieranieEnergy;
                     zulEq.gloves.item.equipable = itemlist[zulEq.gloves.item.id - 1].equipable;
                     }
                     if(zulEq.legs.item.id)
                     {
                     zulEq.legs.item.name = itemlist[zulEq.legs.item.id - 1].name;
                     zulEq.legs.item.value = itemlist[zulEq.legs.item.id - 1].value;
                     zulEq.legs.item.img = itemlist[zulEq.legs.item.id - 1].img;
                     zulEq.legs.item.rarity = itemlist[zulEq.legs.item.id - 1].rarity;
                     zulEq.legs.item.exp = itemlist[zulEq.legs.item.id - 1].exp;
                     zulEq.legs.item.cb = itemlist[zulEq.legs.item.id - 1].cb;
                     zulEq.legs.item.tootlipText = itemlist[zulEq.legs.item.id - 1].tootlipText;
                     zulEq.legs.item.zulEnergyRefill = itemlist[zulEq.legs.item.id - 1].zulEnergyRefill;
                     zulEq.legs.item.jumpEnergy = itemlist[zulEq.legs.item.id - 1].jumpEnergy;
                     zulEq.legs.item.zbieranieEnergy = itemlist[zulEq.legs.item.id - 1].zbieranieEnergy;
                     zulEq.legs.item.equipable = itemlist[zulEq.legs.item.id - 1].equipable;
                     }
                     if(zulEq.boots.item.id)
                     {
                     zulEq.boots.item.name = itemlist[zulEq.legs.item.id - 1].name;
                     zulEq.boots.item.value = itemlist[zulEq.legs.item.id - 1].value;
                     zulEq.boots.item.img = itemlist[zulEq.legs.item.id - 1].img;
                     zulEq.boots.item.rarity = itemlist[zulEq.legs.item.id - 1].rarity;
                     zulEq.boots.item.exp = itemlist[zulEq.legs.item.id - 1].exp;
                     zulEq.boots.item.cb = itemlist[zulEq.legs.item.id - 1].cb;
                     zulEq.boots.item.tootlipText = itemlist[zulEq.legs.item.id - 1].tootlipText;
                     zulEq.boots.item.zulEnergyRefill = itemlist[zulEq.legs.item.id - 1].zulEnergyRefill;
                     zulEq.boots.item.jumpEnergy = itemlist[zulEq.legs.item.id - 1].jumpEnergy;
                     zulEq.boots.item.zbieranieEnergy = itemlist[zulEq.legs.item.id - 1].zbieranieEnergy;
                     zulEq.boots.item.equipable = itemlist[zulEq.legs.item.id - 1].equipable;
                     }
            }

            if(localStorage.SleepX != "undefined" && localStorage.SleepY != "undefined")
            {
                SleepX = localStorage.SleepX;
                SleepY = localStorage.SleepY;
            }
            if(localStorage.zbieranieExp != undefined)
            {
                zbieranieExp = Number(localStorage.zbieranieExp);
                ZbieranieLevel();
            }
            if(localStorage.GeneralExp != undefined)
            {
                GeneralExp = Number(localStorage.GeneralExp);
                GeneralLevel();
            }
            if(localStorage.jumpExp != undefined)
            {
                jumpExp = Number(localStorage.jumpExp);
                JumpLevel(); 
            }
            document.getElementById('zulEnergy').innerHTML = zulEnergy.toFixed(2);
        }
        window.onload = Load;
        setInterval(Save, 30000);
    </script>
    <style>
        body
        {
            color:white;
            font-size:1.25vw;
        }
        #map
        {
            background-color:#222222;
            position: absolute;
            width:100%;
            height:100%;
            top:0px;
            left:0vw;
            transition: opacity 1s;
            overflow:hidden;
            
        }
        #mapContainer
        {
            background-color:#111;
            width:100%;
            height:100%;
            position: absolute;
            top:0px;
            left:0vw;
        }
        #map .smietnik
        {
            background-color:red;
            width:3vw;
            height:3vw;
            position:absolute;
        }
        #map .zlom
        {
            background-color:purple;
            width:3vw;
            height:3vw;
            position:absolute;
        }
        #map .puste
        {
            background-color:gray;
            width:3vw;
            height:3vw;
            position:absolute;
        }
        #map .puste .loot
        {
            display:none;
        }
        .smietnik .loot
        {
            position:relative;
            right:20vw;
            background-color:#222222;
            min-height: 6vw;
            width:20vw;
            display:none;
            z-index:1;
            opacity:0.98;
            display:none;
            bottom:12vh;
            overflow-y:scroll;
            max-height:50vh;
        }
        .smietnik .loot::-webkit-scrollbar
        {
            background-color: #333333;
        }
        .smietnik .loot::-webkit-scrollbar-thumb
        {
            background-color: #444444;
        }
        .smietnik .loot .lootitem
        {
            position:relative;
            cursor:pointer;
            width:90%;
            transition: background-color 0.5s;
            opacity:0.99;

        }
        .smietnik .loot .lootitem:hover
        {
            background-color: #333333;
        }
        .smietnik .loot .lootitem img
        {
            height:5vw;
            width:5vw;
        }
        .smietnik .loot .lootitem .name
        {
            display:inline;
            position:absolute;
            top:2vw;
            left:7vw;
            z-index:-1;
            
        }
        .smietnik .loot .close
        {
            position:absolute;
            right:0vw;
            cursor:pointer;
            font-size: 2vw;
            top:0vw;
            
        }
        #zulInv
        {
            position:absolute;
            background-color:#444444;
            left:2vw;
            height:98vh;
            width:35vw;
            overflow-y: scroll;
            overflow-x:hidden;
            display:none;
            z-index:1;
            
        }
        #zulInv img
        {
            width:5vw;
            height:5vw;
        }
        #zulInv .name
        {
            position:relative;
            bottom:5vw;
            left:6vw;
        }
        #zulInv .value
        {
            position:relative;
            bottom:5vw;
            left:6vw;
            
        }
        #zulInv .amount
        {
            position:relative;
            left:6vw;
            bottom:5vw;
        }
        #zulInv .invItemUsable
        {
            height:5vw;
            margin-bottom:1vh;
            cursor:pointer;
            transition: background-color 0.3s;
        }
        #zulInv .invItemUsable:hover
        {
            height:5vw;
            margin-bottom:1vh;
            cursor:pointer;
            background-color:#555555;
        }
        #zulInv .invItemUnusable
        {
            height:5vw;
            margin-bottom:1vh;
        }
        #zulInv::-webkit-scrollbar-track
        {
            background-color: #222222;
        }
        #zulInv::-webkit-scrollbar-thumb
        {
            background-color: #555555;
        }
        #zulInv::-webkit-scrollbar
        {
            width:1em;
        }
        #zulInvToggle
        {
            background-color: #333333;
            width:10vw;
            z-index:3;
            padding:1vw;
            text-align:center;
            position:absolute;
            top:1vh;
            left:1vw;
            cursor:pointer;
        }
        #MapGenerateButton
        {
            position:absolute;
            right:10px;
            width:100px;
            background-color:#333333;
            padding:1vh;
            cursor:pointer;
            text-align:center;
            z-index:3;
        }
        .laweczka
        {
            position:absolute;
            background-color:yellow;
            color:black;
            padding:2vw;
        }
        .laweczka .loot
        {
            display:none;
            visibility: hidden;
        }
        #zulEnergy
        {
            position:absolute;
            background-color:yellow;
            z-index:3;
            color:black;
            width:8vw;
            padding:1px;
            text-align:center;
            left:50%;
            right:50%;
            cursor:default;
        }
        #SaveWipeButton
        {
            z-index:3;
            position:absolute;
            bottom:4vh;
            right:0px;
            background-color:#333;
            padding:1vh;
            width:8vw;
            cursor:pointer;
        }
        #SaveWipeConfirmation
        {
            position:absolute;
            z-index:5;
            background-color:#bbb;
            width:50vw;
            height:50vh;
            left:25vw;
            top:25vh;
            text-align:center;
            color:black;
        }
        .WipeMsg
        {
            position:relative;
            top:5%;
        }
        .WipeYes
        {
            position:absolute;
            left:20%;
            top:40%;
            background-color:lawngreen;
            padding:5%;
            width:10%;
            cursor:pointer;
        }
        .WipeNo
        {
            position:absolute;
            right:20%;
            top:40%;
            background-color:red;
            padding:5%;
            width:10%;
            cursor:pointer;
        }
        #StatsToggle
        {
            background-color: #333333;
            width:10vw;
            z-index:3;
            padding:1vw;
            text-align:center;
            position:absolute;
            top:1vh;
            left:14vw;
            cursor:pointer;
        }
        #stats
        {
            position:absolute;
            background-color:#444444;
            left:2vw;
            height:98vh;
            width:35vw;
            overflow-y: scroll;
            overflow-x:hidden;
            display:none;
            z-index:1;
        }
        .MsgIntro
        {
            position:absolute;
            z-index:5;
            background-color:#bbb;
            width:50vw;
            height:25vh;
            left:25vw;
            top:10vh;
            text-align:center;
            color:black;
        }
        .Msg
        {
            position:absolute;
            z-index:5;
            background-color:#bbb;
            width:50vw;
            height:50vh;
            max-height:75vh;
            left:25vw;
            top:10vh;
            text-align:center;
            color:black;
        }
        .MsgContent
        {
            position:relative;
            top:5%;
        }
        .MsgYes
        {
            position:absolute;
            left:20%;
            background-color:lawngreen;
            padding:5%;
            width:10%;
            cursor:pointer;
        }
        .MsgNo
        {
            position:absolute;
            right:20%;
            
            background-color:red;
            padding:5%;
            width:10%;
            cursor:pointer;
        }
        .gownoYN
        {
            bottom:3vh;
        }
        #gownoButton
        {
            z-index:3;
            position:absolute;
            bottom:10vh;
            width:8vw;
            right:0px;
            text-align:center;
            background-color:#333;
            padding:1vh;
            cursor:pointer;
        }
        #intro
        {
            margin-left:auto;
            margin-right:auto;
            position:relative;
            top:5vh;
        }
        .LevelYes
        {
            position:absolute;
            left:20%;
            top:40%;
            background-color:lawngreen;
            padding:5%;
            width:10%;
            cursor:pointer;
        }
        #zulItems
        {
            position:relative;
            top:5vh;
        }
        #zulEquipped .zulEqItem
        {
            position:relative;
            top:1vw;
            height:7vw;
        }
        #zulEquipped .zulEqItem .zulEqNameNoItem
        {
            position: relative;
            font-size: 2vw;
            display:inline;
        }
        #zulEquipped .zulEqItem .zulEqName
        {
            position: absolute;
            font-size: 2.5vw;
            display:inline;
            top:0.9vw;
        }
        #zulEquipped .zulEqItem .zulEqTooltip
        {
            background-color:#333;
            opacity:0.90;
            top:0px;
            position:absolute;
            visibility: hidden;
        }
        #zulEquipped .zulEqItem:hover .zulEqTooltip
        {
            visibility: visible;
        }
        #map::-webkit-scrollbar
        {
            
        }
    </style>
</head>
<body>
    <div id="zulInvToggle" onclick="zulInventoryToggle()">Ekwipunek</div>
    <div id="StatsToggle" onclick="StatsToggle()">Statystyki</div>
    <div id="stats" style="display:none;"></div>
    <div id="MapGenerateButton" onclick="MapGenerate('first')">Prześpij sie na ławeczce</div>
    <div id="SaveWipeButton" onclick="document.getElementById('SaveWipeConfirmation').style.display='block'">Usuń zapis gry</div>
    <div id="SaveWipeConfirmation" style="display:none;"><div class="WipeMsg">Czy na pewno chcesz to zrobić?</div><div class="WipeYes" onclick="localStorage.clear(); document.getElementById('SaveWipeConfirmation').style.display='none'; location.reload()">Tak</div><div class="WipeNo" onclick="document.getElementById('SaveWipeConfirmation').style.display='none';">Nie</div></div>
    <div class="Msg" id="Msg" style="display:none;"><div id="MsgContent">Czy na pewno chcesz to zrobić?</div><div class="LevelYes" onclick="document.getElementById('Msg').style.display='none';">OK</div></div>

    <div id="gownoButton" onclick="IntroToggle()">Intro</div>
    <div id="gownoWarning" class="Msg" style="display:none; height:50vw;">
        <div class="MsgContent">Czy na pewno chcesz to zrobić? Przejście dalej może skutkować poważną traumą i depresją do końca życia!</div>
        <div class="MsgYes gownoYN" style="bottom:0px;" onclick="Intro()">Tak :(</div>
        <div class="MsgNo gownoYN" style="bottom:0px;" onclick="IntroToggle()">Nie :)</div>
        <video id="intro" style="display:none; width:45vw; height:40vh;">
            <source src="intro.mp4" type="video/mp4"></source>
        </video>
        <div></div>
    </div>

    <div id="zulEnergy">200.00</div>
    <div id="mapContainer">
    <div id="map">
        
        <!-- <div class="smietnik" style="left:20vw; top:30vh;"  id="1,1">    
            <div class="loot">

                <div class="lootitem" onclick="AddItem(1)">
                    <img src="img/puszka.jpg" />
                    <span class="name">Karpackie prasnac</span>
                </div>
                <div class="lootitem" onclick="AddItem(1)">
                    <img src="img/puszka.jpg" />
                    <span class="name">Karpackie prasnac</span>
                </div>

                <div class="close" onclick="closeloot('1,1')">X</div>
            </div>
        </div> <div onclick="Jump(1,1)" class="smietnik" style="left:20vw; top:30vh; opacity:0;" ></div>
        <div class="smietnik" style="left:40vw; top:30vh;" onclick="Jump(2,1)" id="2,1"></div><div class="smietnik" style="left:40vw; top:30vh; opacity:0;" onclick="Jump(2,1)" id="2,1"></div>
        <div class="smietnik" style="left:60vw; top:30vh;" onclick="Jump(3,1)" id="3,1"></div><div class="smietnik" style="left:60vw; top:30vh; opacity:0;" onclick="Jump(3,1)" id="3,1"></div>
        <div class="smietnik" style="left:20vw; top:50vh;" onclick="Jump(1,2)" id="1,2"></div><div class="smietnik" style="left:20vw; top:50vh; opacity:0;" onclick="Jump(1,2)" id="1,2"></div>
        <div class="smietnik" style="left:40vw; top:50vh;" onclick="Jump(2,2)" id="2,2"></div><div class="smietnik" style="left:40vw; top:50vh; opacity:0;" onclick="Jump(2,2)" id="2,2"></div>
        <div class="smietnik" style="left:60vw; top:50vh;" onclick="Jump(3,2)" id="3,2"></div><div class="smietnik" style="left:60vw; top:50vh; opacity:0;" onclick="Jump(3,2)" id="3,2"></div>
        <div class="smietnik" style="left:20vw; top:70vh;" onclick="Jump(1,3)" id="1,3"></div><div class="smietnik" style="left:20vw; top:70vh; opacity:0;" onclick="Jump(1,3)" id="1,3"></div>
        <div class="smietnik" style="left:40vw; top:70vh;" onclick="Jump(2,3)" id="2,3"></div><div class="smietnik" style="left:40vw; top:70vh; opacity:0;" onclick="Jump(2,3)" id="2,3"></div>
        <div class="smietnik" style="left:60vw; top:70vh;" onclick="Jump(3,3)" id="3,3"></div><div class="smietnik" style="left:60vw; top:70vh; opacity:0;" onclick="Jump(3,3)" id="3,3"></div>
 
        !-->

    </div>
    </div>
    <div id="zulInv" style="display:none;">
        
    </div>     
</body>
</html>